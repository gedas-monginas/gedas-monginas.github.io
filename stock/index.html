<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Net market value calculator for 1stDibs stock options</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“ˆ</text></svg>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.3/css/bulma.min.css" integrity="sha512-IgmDkwzs96t4SrChW29No3NXBIBv8baW490zk5aXvhCD8vuZM3yUSkbyTBcXohkySecyzIrUwiF/qV0cuPcL3Q==" crossorigin="anonymous" />
    <style>
        input {
            max-width: 50px;
        }

        /* NO ARROWS ON NUMBER INPUTS */
        /* Chrome, Safari, Edge, Opera */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        /* Firefox */
        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>
  </head>
  <body>
    <section class="section">
        <div class="container">
            <h1 class="title">
                Net market value calculator for 1stDibs stock options
            </h1>
            <div class="js-root">
                <progress class="progress is-small is-dark" max="100">45%</progress>
            </div>
        </div>
    </section>
    <script type="text/javascript">
        !async function(){function t(){const t=window.sessionStorage.getItem("optionsData");if(t){const e=JSON.parse(t);if(e&&e.length)return e}return[{total:1}]}function e(){return window.sessionStorage.getItem("desiredMarketValue")||50}function n(t,e){return{vestedValue:t.vested*e-t.vested*t.price,totalValue:t.total*e-t.total*t.price}}function a(a){const s=t(),r={total:0,vested:0,vestedValue:0,totalValue:0,dVestedValue:0,dTotalValue:0},d=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),l=e();let i="";a.innerHTML="\n            <thead><tr>\n                <th>Options</th>\n                <th>Total</th>\n                <th>Vested</th>\n                <th>Exercise price</th>\n                <th>Vested value</th>\n                <th>Total value</th>\n                <th>Desired vested value</th>\n                <th>Desired total value</th>\n                <th>Actions</th>\n            </tr></thead>",s.forEach((t,e)=>{t.vested=t.vested||t.total,t.price=t.price||0;const{vestedValue:a,totalValue:s}=n(t,o),{vestedValue:u,totalValue:c}=n(t,l);i+=`\n            <tr data-key="${e}" class="js-options-row">\n                <th>${e+1}</th>\n                <td><input type="number" name="total" value="${t.total}"></td>\n                <td><input type="number" name="vested" value="${t.vested}"></td>\n                <td><input type="number" name="price" value="${t.price}"></td>\n                <td>${d.format(a)}</td>\n                <td>${d.format(s)}</td>\n                <td>${d.format(u)}</td>\n                <td>${d.format(c)}</td>\n                <td>\n                    <a name="remove" href="#remove" class="button is-danger is-outlined is-small">Remove Row</a>\n                </td>\n            </tr>`,r.total+=t.total,r.vested+=t.vested,r.vestedValue+=a,r.totalValue+=s,r.dVestedValue+=u,r.dTotalValue+=c}),i+=`\n            <tfoot><tr>\n                <th><strong>Totals:</strong></th>\n                <th>${r.total}</th>\n                <th>${r.vested}</th>\n                <th></th>\n                <th>${d.format(r.vestedValue)}</th>\n                <th>${d.format(r.totalValue)}</th>\n                <th>${d.format(r.dVestedValue)}</th>\n                <th>${d.format(r.dTotalValue)}</th>\n                <td>\n                    <a name="add" href="#add" class="button is-success is-outlined is-small">Add New Row</a>\n                </td>\n            </tr></tfoot>`,a.innerHTML+=i}function s(t,e){window.sessionStorage.setItem("optionsData",JSON.stringify(e.filter(Boolean))),a(t)}const o=await async function(){const t=await fetch("https://finnhub.io/api/v1/quote?symbol=DIBS&token=c3jhdhqad3i82raoe5f0");if(t.ok)return(await t.json()).c;return 1}(),r=e(),d=document.createElement("table");d.className="table is-hoverable";const l=document.querySelector(".js-root");l.innerHTML="",l.innerHTML+=`\n        <div class="block">\n            Current Market Value: <strong>${o}</strong>\n            <br />\n            Desired Market Value:\n            <input type="number" name="desiredValue" value="${r}">\n        </div>  \n    `,l.append(d),a(d),l.addEventListener("change",({target:e})=>{const n=e.getAttribute("name"),o=parseFloat(e.value);switch(n){case"total":case"vested":case"price":const r=e.closest(".js-options-row").getAttribute("data-key");if(r){const e=t();e[r][n]=o,s(d,e)}break;case"desiredValue":o&&(window.sessionStorage.setItem("desiredMarketValue",o),a(d))}}),l.addEventListener("click",({target:e})=>{switch(e.getAttribute("name")){case"remove":const n=e.closest(".js-options-row").getAttribute("data-key");if(n){const e=t();delete e[n],s(d,e)}break;case"add":const a=t();a.push({total:1}),s(d,a)}})}();
    </script>
  </body>
</html>